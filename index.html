<!DOCTYPE html>
<html lang="en and bengali">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gold Shop Billing Software</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- jsPDF CDN for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- JsBarcode CDN for barcode generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsbarcode/3.11.5/JsBarcode.all.min.js"></script>
    <!-- SheetJS (xlsx) for Excel export -->
    <script src="https://unpkg.com/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
        }
        /* Custom scrollbar for item list and search results */
        .custom-scroll::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #e0f2f7;
            border-radius: 10px;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #a7d9ed;
            border-radius: 10px;
        }
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #7cc8e7;
        }
        /* Styling for select options */
        select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>');
            background-repeat: no-repeat;
            background-position: right 0.7em top 50%;
            background-size: 0.8em;
            padding-right: 2em;
        }
    </style>
</head>
<body class="p-4 md:p-8 flex items-center justify-center min-h-screen">
    <div class="flex flex-col lg:flex-row w-full max-w-7xl bg-white rounded-lg shadow-xl overflow-hidden">
        <!-- Left Panel: Bill Creation -->
        <div class="lg:w-2/3 p-6 md:p-8 bg-blue-50/50 flex flex-col space-y-4">
            <div class="text-center mb-4">
                <h1 class="text-2xl md:text-3xl font-bold text-gray-800 mb-1">M/s. S.K. JEWELLERS</h1>
                <p class="text-xs md:text-sm text-gray-600">BISWAS SUPER MARKET (BABUPARA ROAD)</p>
                <p class="text-xs md:text-sm text-gray-600">THAKURNAGAR BAZAR, NORTH 24 PGS</p>
                <p class="text-xs md:text-sm text-gray-600">India - 743287</p>
                <p class="text-xs md:text-sm text-gray-600">Phone: 7478740724 / 947419562</p>
                <p class="text-xs md:text-sm text-gray-600">Email: skjewellersthakurnagar@gmail.com</p>
                <p class="text-xs md:text-sm text-gray-600">GSTIN: 19AGVPC6582C</p>
            </div>
            <h2 class="text-lg md:text-xl font-bold text-gray-800 border-b pb-2 mb-4">New Bill Details</h2>
            <!-- Customer Information -->
            <div class="p-4 bg-white rounded-lg shadow-sm border border-blue-200">
                <h3 class="text-md md:text-lg font-semibold text-gray-700 mb-3">Customer Information</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-3">
                    <div>
                        <label for="customerName" class="block text-sm font-medium text-gray-700">Customer Name:</label>
                        <input type="text" id="customerName" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <div>
                        <label for="phoneNumber" class="block text-sm font-medium text-gray-700">Phone Number:</label>
                        <input type="text" id="phoneNumber" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <div class="col-span-1 md:col-span-2">
                        <label for="address" class="block text-sm font-medium text-gray-700">Address:</label>
                        <input type="text" id="address" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <div>
                        <label for="billDate" class="block text-sm font-medium text-gray-700">Date (YYYY-MM-DD):</label>
                        <input type="date" id="billDate" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                </div>
            </div>
            <!-- Add Item Section -->
            <div class="p-4 bg-white rounded-lg shadow-sm border border-blue-200">
                <h3 class="text-md md:text-lg font-semibold text-gray-700 mb-3">Add Item</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-3 mb-4">
                    <div>
                        <label for="itemDescription" class="block text-sm font-medium text-gray-700">Description:</label>
                        <input type="text" id="itemDescription" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <div>
                        <label for="itemKarat" class="block text-sm font-medium text-gray-700">Karat (e.g., 22K/24K):</label>
                        <input type="text" id="itemKarat" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <div>
                        <label for="itemWeight" class="block text-sm font-medium text-gray-700">Weight (g):</label>
                        <input type="number" id="itemWeight" step="0.01" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <div>
                        <label for="itemRate" class="block text-sm font-medium text-gray-700">Rate (₹/g):</label>
                        <input type="number" id="itemRate" step="0.01" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                </div>
                <button id="addItemBtn" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-200 ease-in-out transform hover:scale-105">
                    <i class="fas fa-plus mr-2"></i>Add Item
                </button>
            </div>
            <!-- Current Bill Items -->
            <div class="p-4 bg-white rounded-lg shadow-sm border border-blue-200 flex-grow overflow-hidden">
                <h3 class="text-md md:text-lg font-semibold text-gray-700 mb-3">Current Bill Items</h3>
                <div id="itemList" class="bg-gray-50 p-3 rounded-md border border-gray-200 h-48 md:h-64 overflow-y-auto custom-scroll">
                    <p class="text-gray-500 text-sm italic" id="noItemsMsg">No items added yet.</p>
                </div>
                <div class="flex items-center mt-4">
                    <label for="taxRate" class="block text-sm font-medium text-gray-700 mr-2">Tax Rate (%):</label>
                    <input type="number" id="taxRate" value="3" step="0.01" class="w-20 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                </div>
                <div id="totalLabel" class="text-md md:text-lg font-bold text-gray-800 mt-4">
                    Subtotal: ₹0.00 | Tax (3.0%): ₹0.00<br>Grand Total: ₹0.00
                </div>
            </div>
            <!-- Save Buttons -->
            <div class="flex flex-col sm:flex-row justify-center gap-4 mt-6">
                <button id="saveTextBillBtn" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-md shadow-md transition duration-200 ease-in-out transform hover:scale-105">
                    <i class="fas fa-file-alt mr-2"></i>Save Bill (Text)
                </button>
                <button id="savePdfBillBtn" class="flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-md shadow-md transition duration-200 ease-in-out transform hover:scale-105">
                    <i class="fas fa-file-pdf mr-2"></i>Save Bill (PDF)
                </button>
            </div>
        </div>
        <!-- Right Panel: Bill History & Reports -->
        <div class="lg:w-1/3 p-6 md:p-8 bg-gray-50/50 flex flex-col space-y-4 border-l border-gray-200">
            <h2 class="text-lg md:text-xl font-bold text-gray-800 border-b pb-2 mb-4">Bill History & Reports</h2>
            <!-- Search Bills Section -->
            <div class="p-4 bg-white rounded-lg shadow-sm border border-gray-200">
                <h3 class="text-md md:text-lg font-semibold text-gray-700 mb-3">Search Bills</h3>
                <input type="text" id="searchName" placeholder="Customer Name" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm text-gray-500 focus:text-black">
                <input type="date" id="searchDate" class="mt-3 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm text-gray-500 focus:text-black">
                <button id="searchBillsBtn" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-200 ease-in-out transform hover:scale-105 mt-4">
                    <i class="fas fa-search mr-2"></i>Search
                </button>
                <div id="searchResults" class="bg-gray-50 p-3 rounded-md border border-gray-200 h-40 overflow-y-auto mt-4 custom-scroll">
                    <p class="text-gray-500 text-sm italic" id="noSearchResultsMsg">No search results yet.</p>
                </div>
            </div>
            <!-- Monthly Report Section -->
            <div class="p-4 bg-white rounded-lg shadow-sm border border-gray-200">
                <h3 class="text-md md:text-lg font-semibold text-gray-700 mb-3">Monthly Report <i class="fas fa-calendar-alt ml-1"></i></h3>
                <label for="reportMonth" class="block text-sm font-medium text-gray-700">Select Month:</label>
                <select id="reportMonth" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-yellow-500 focus:border-yellow-500 sm:text-sm">
                    <!-- Options populated by JS -->
                </select>
                <label for="reportYear" class="block text-sm font-medium text-gray-700 mt-3">Select Year:</label>
                <select id="reportYear" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-yellow-500 focus:border-yellow-500 sm:text-sm">
                    <!-- Options populated by JS -->
                </select>
                <button id="generateReportBtn" class="w-full bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-200 ease-in-out transform hover:scale-105 mt-4">
                    <i class="fas fa-chart-bar mr-2"></i>Generate Report
                </button>
                <div id="reportResults" class="bg-gray-50 p-3 rounded-md border border-gray-200 mt-4 text-gray-700 text-sm">
                    <p class="text-gray-500 text-sm italic" id="noReportMsg">Select a month and year to generate report.</p>
                </div>
            </div>
            <!-- Export to Excel Button -->
            <button id="exportExcelBtn" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-md shadow-md transition duration-200 ease-in-out transform hover:scale-105">
                <i class="fas fa-file-excel mr-2"></i>Export All Bills to Excel
            </button>
        </div>
    </div>
    <!-- Custom Modal for Messages/Details -->
    <div id="customModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl max-w-lg w-full p-6 relative">
            <button id="closeModalBtn" class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-xl font-bold">&times;</button>
            <h3 id="modalTitle" class="text-xl font-bold text-gray-800 mb-4"></h3>
            <div id="modalBody" class="text-gray-700 overflow-y-auto max-h-96 custom-scroll pr-2"></div>
            <div id="modalActions" class="mt-6 flex justify-end gap-3">
                <!-- Action buttons will be added here dynamically -->
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>